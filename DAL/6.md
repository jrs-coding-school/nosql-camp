# Exercise: Creating Design Documents and Views

## What you will learn

- Create design documents containing views.

## Review

To create a view, you must first create a design document which describes the `map` function to use.  Here's an example:

```
// document that tells PouchDB/CouchDB
// to build up an index on doc.name
var ddoc = {
  _id: '_design/viewByName',
  views: {
    viewByName: {
      map: function (doc) { emit(doc.name); }.toString()
    }
  }
};
```

The PouchDB `query()` API enables you to retrieve documents from the specified view:

```
db.query('viewByName') ...
```

## Instructions


- Create a function named `createView()` within the **/DAL/noSQL.js** javascript file.  The function is responsible for adding a design document to the database.

  ```
  function createView(designDoc, callback) { ... your code here ... }
  ```

- Within your function, make sure you have a valid document.

```
if (typeof designDoc == "undefined" || designDoc === null) {
      return callback(new Error('400Missing design document.'));
}
```

- Create the following design documents and views by calling your `createView()` function to add the design docs to the database.  The views defined within your design document _should not_ `emit` the document.  `console.log` the response or the error.

  <table>
    <tr>
      <th>design doc `_id` property value</th>
      <th>view name</th>
      <th>Notes</th>
    </tr>
    <tr>
      <td>`_design/emailView`</td>
      <td>emailView</td>
      <td>List and sort persons by email address.</td>
    </tr>  
    <tr>
      <td>`__design/lastNameView`</td>
      <td>lastNameView</td>
      <td>List and sort persons by last name.  Hint: Ensure each key value returned by this view is unique.</td>
    </tr>  
    <tr>
      <td>`_design/reliefEfforts`</td>
      <td>reliefEfforts</td>
      <td>List and sort relief efforts by relief effort name.</td>
    </tr>  
  </table>

- Using Futon, select each view to check the results.

[Home](/)  |  [DAL](/DAL)  |  [Back](/DAL/5)  |  [Next](/DAL/7)
